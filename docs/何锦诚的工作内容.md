# 何锦诚的工作内容
我是何锦诚，我在项目中负责的工作是通过大模型 API 调用来批量处理数据集的问题，并通过提示词工程进一步优化模型在数据集上的表现。

## Zero Shot 系统提示词
我首先编写了 Zero-shot 的系统提示词 [zero-shot-prompt.js](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/prompts/zero-shot-prompt.js)：

```
You are an accurate table Q&A assistant. Please carefully analyze the following table and answer the questions accurately. Note: Only output the answers, do not explain the process.
"table_text":table content;
"statement": question.
Please give the answer directly.
```

我（何锦诚）、郑宇榕、李凯文基于测试集的同一个随机子集[test_100.jsonl](https://github.com/JacksonHe04/smart-table-llm/blob/main/datasets/test_100.jsonl)分别展开了测试。

## Doubao 1.5 Pro
我将该提示词应用到 doubao-1-5-pro-256k 模型上，ACC 是 57%，这是我的工作的基础。

在针对训练集的工作中，我让模型在批量处理训练集时将回答错误的问题及其内容存储到一个名为 [wrong_answers.jsonl](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/wrong_answers.jsonl) 的文件中。

### 基于训练集的错误案例编写规则提示词
在经历了多次基于训练集的随机抽取批量测试，我在 [wrong_answers.jsonl](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/wrong_answers.jsonl) 文件中选取了 39 个回答错误的案例，针对这些案例的错误原因进行分析，并据此为提示词增加了 15 条规则。

我把添加了规则的提示词称为 jincheng-prompt，在项目文件中是 [simple-prompt.js](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/prompts/simple-prompt.js)。

基于 [simple-prompt.js](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/prompts/simple-prompt.js)，doubao-1.5-pro-32k 在 [test_100.jsonl](https://github.com/JacksonHe04/smart-table-llm/blob/main/datasets/test_100.jsonl) 上的 ACC 是 62%，相比于 [Zero-shot]((https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/prompts/zero-shot-prompt.js)) 的 57% 提高了 5%。

我把规则从中文换成了英文后，ACC 达到了 63%，提高了 1%。

我在测试集上进行了独立的 5 次测试，每次随机抽取 100 个案例，ACC 的平均值是 61.60%。

测试日志为 [test-1.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/test-1.txt)、[test-2.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/test-2.txt)、[test-3.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/test-3.txt)、[test-4.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/test-4.txt)、[test-5.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/test-5.txt)。

### 更复杂的规则提示词
根据[谷歌提示工程指南](https://ai.google.dev/gemini-api/docs/prompting-strategies#few-shot)，我重新深度优化了提示词，新增了多条规则，并给出了具体执行的步骤，于[prompt.js](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/prompts/prompt.js)中，随机测试了 100 个案例，ACC 反而降低到 59%。

### Few Shot
我们根据 [ConsistNER: Towards Instructive NER Demonstrations for LLMs with the Consistency of Ontology and Context](https://ojs.aaai.org/index.php/AAAI/article/view/29892#:~:text=To%20address%20this%20issue%2C%20we%20propose%20ConsistNER%2C%20a,incorporates%20ontological%20and%20contextual%20information%20for%20low-resource%20NER.) 这篇论文，从训练集中选取了 1 个案例作为 few-shot 的例子，在 [few-shot.js](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/prompts/few-shot.js) 中（不包含规则）。

同样在 doubao-1.5-pro-32k 上进行了独立的 5 次测试，每次随机抽取 100 个案例，ACC 的平均值是 63%。

测试日志为 [few-shot-1.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/few-shot-1.txt)、[few-shot-2.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/few-shot-2.txt)、[few-shot-3.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/few-shot-3.txt)、[few-shot-4.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/few-shot-4.txt)、[few-shot-5.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/few-shot-5.txt)。

## Doubao 1.5 Vision Pro 32k
因为不管是通过训练集优化规则提示词，还是通过 few-shot 来优化提示词，模型的表现都没有明显的提升，所以我尝试了 doubao-1.5-vision-pro-32k 模型，该模型的表现相比于 doubao-1.5-pro-32k 显著提升。

在测试集上进行了独立的 5 次测试，每次随机抽取 100 个案例，ACC 的平均值是 70.40%，是我首次在测试集上突破了 70% 的 ACC。

测试日志为: [vision-pro-simple-prompt-1.txt](htURL_ADDRESS.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/vision-pro-simple-prompt-1.txt)、[vision-pro-simple-prompt-2.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/vision-pro-simple-prompt-2.txt)、[vision-pro-simple-prompt-3.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/vision-pro-simple-prompt-3.txt)、[vision-pro-simple-prompt-4.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/vision-pro-simple-prompt-4.txt)、[vision-pro-simple-prompt-5.txt](https://github.com/JacksonHe04/smart-table-llm/blob/main/llm-api/logs/vision-pro-simple-prompt-5.txt)。